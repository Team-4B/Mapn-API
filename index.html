<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

      <script>
        $(function() {
          setupLanguages(["JavaScript"]);
        });
      </script>
  </head>

  <body class="index">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <img src="images/logo.png" />
        <div class="lang-selector">
              <a href="#" data-language-name="JavaScript">JavaScript</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='http://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
            <li><a href='https://github.com/Team-4B/Mapn-API'>Documentation Source</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id="introduction">Introduction</h1>

<p>Welcome to the Mapn RESTful API! You can use our API to access Mapn API endpoints.</p>

<h3 id="for-geo-locations-use-geojson-format">For geo locations, use <a href="http://geojson.org/">GeoJSON</a> format</h3>

<p><code class="prettyprint">&quot;geometry&quot;: { &quot;type&quot;: &quot;Point&quot;, &quot;coordinates&quot;: [125.6, 10.1]}</code></p>

<p>Where coordinates are in the format <code class="prettyprint">[lat, lng]</code></p>

<h3 id="please-url-encode-all-parameters">Please URL encode all parameters.</h3>

<table><thead>
<tr>
<th>Search query</th>
<th>URL encoded query</th>
</tr>
</thead><tbody>
<tr>
<td>#grocery #food</td>
<td>%23grocery+%23food</td>
</tr>
<tr>
<td>hello world :)</td>
<td>hello%20word%20%3A%29</td>
</tr>
<tr>
<td>2015-09-26T19:47:03Z</td>
<td>2015-09-26T19%3A47%3A03Z</td>
</tr>
</tbody></table>

<p>Note: space character can be represented by + or %20.</p>

<h3 id="all-datetime-objects-are-utc-values-represented-in-iso-8601-format">All datetime objects are UTC values represented in ISO-8601 format</h3>

<p><code class="prettyprint">&quot;2015-09-26T19:47:03Z&quot;</code></p>

<h1 id="authentication">Authentication</h1>

<blockquote>
<p>To login, send a post request to <code class="prettyprint">/auth/local</code> :</p>
</blockquote>
<pre class="highlight plaintext"><code>$http.post('https://api.example.com/auth/local', {
          email: example@email.com,
          password: 12345
        }).
        success(function(data) {
          $cookieStore.put('token', data.token);
        });

</code></pre>

<p>Mapn uses authentication tokens to allow access to authenticated users. Guests have limited access to Mapn data.</p>

<p>Mapn expects for the token to be included in all authenticated API requests to the server in a header that looks like the following:</p>

<p><code class="prettyprint">Authorization:Bearer &lt;token&gt;</code></p>

<aside class="notice">
You must replace <code>&lt;token&gt;</code> with your session token returned by /auth
</aside>

<h1 id="pins">Pins</h1>

<h2 id="get-all-pins">Get all pins</h2>
<pre class="highlight plaintext"><code>$http({
    method: 'GET',
    url: 'https://www.example.com/api/pins',
    params: {
        "limit": 10,
        "location": "125.6,10.2",
        "radius": 50
    },
    headers: {"Authorization": "Bearer xxxxYYYYZzzz"}
}).success(function(data){
    // With the data succesfully returned, do something
});
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"pin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356674</span><span class="p">,</span><span class="w">
    </span><span class="nt">"geo"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w"> </span><span class="nt">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">125.6</span><span class="p">,</span><span class="w"> </span><span class="mf">10.1</span><span class="p">]</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span><span class="w"> </span><span class="s2">"restaurant"</span><span class="p">],</span><span class="w">
    </span><span class="nt">"entry_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">323124</span><span class="p">,</span><span class="mi">534939</span><span class="p">],</span><span class="w">
    </span><span class="nt">"bounties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w"> 
    </span><span class="nt">"pin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356676</span><span class="p">,</span><span class="w">
    </span><span class="nt">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Point"</span><span class="p">,</span><span class="w"> </span><span class="nt">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">125.62</span><span class="p">,</span><span class="w"> </span><span class="mf">10.1</span><span class="p">]</span><span class="w"> </span><span class="p">},</span><span class="w">
    </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Super Zoo"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"zoo"</span><span class="p">,</span><span class="w"> </span><span class="s2">"lions"</span><span class="p">,</span><span class="w"> </span><span class="s2">"tigers"</span><span class="p">,</span><span class="w"> </span><span class="s2">"bears"</span><span class="w"> </span><span class="p">],</span><span class="w">
    </span><span class="nt">"entry_ids"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
    </span><span class="nt">"bounties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Make a video featuring our lions"</span><span class="p">,</span><span class="w">
        </span><span class="nt">"reward"</span><span class="p">:</span><span class="w"> </span><span class="mf">5.00</span><span class="p">,</span><span class="w">
        </span><span class="nt">"active"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nt">"posted_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-26T19:47:03Z"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves all pins by searching via parameters. 
If no parameters are specified, the 25 newest pins are returned.
It is highly recommended to specify a location and radius on every request.</p>

<p>Please be aware that a max of 200 pins can be returned in a single request.</p>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/pins</code></p>

<h3 id="query-parameters">Query Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Default</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>location</td>
<td></td>
<td>Used to search via lat,lng. <strong>Example</strong> 37.781157,-122.398720</td>
</tr>
<tr>
<td>radius</td>
<td></td>
<td>A integer in meters that is used with <code class="prettyprint">location</code> to search via lat,lng. <strong>Maximum is 25000</strong></td>
</tr>
<tr>
<td>hashtags</td>
<td></td>
<td>Search by hashtag. <strong>Example</strong> #hello,#world or hello,world</td>
</tr>
<tr>
<td>since</td>
<td></td>
<td>Show items with timestamp <em>after</em> an ISO-8601 datetime</td>
</tr>
<tr>
<td>until</td>
<td></td>
<td>Show items with timestamp <em>before</em> an ISO-8601 datetime</td>
</tr>
<tr>
<td>limit</td>
<td>25</td>
<td>Specify number of pins to return. <strong>Maximum is 200</strong></td>
</tr>
<tr>
<td>skip</td>
<td>0</td>
<td>Skip n entries, used for paging.</td>
</tr>
<tr>
<td>bounties_only</td>
<td>false</td>
<td>When set to <code class="prettyprint">1</code> or <code class="prettyprint">true</code>, only returns pins with an active bounty</td>
</tr>
</tbody></table>

<p><strong>This request does not need to be authenticated</strong></p>

<h2 id="get-a-specific-pin">Get a Specific Pin</h2>
<pre class="highlight plaintext"><code>$http.get('http://example.com/api/pins/1356674');
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"pin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356674</span><span class="p">,</span><span class="w">
  </span><span class="nt">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">-77.69531</span><span class="p">,</span><span class="w"> </span><span class="mf">33.578</span><span class="p">],</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span><span class="w"> </span><span class="s2">"restaurant"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"entry_ids"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bounties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<p>This endpoint retrieves a specific pin.</p>

<aside class="warning">Note that some pins will return 403 Forbidden if they are hidden for admins only.</aside>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/pin/&lt;ID&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The ID of the pin to retrieve</td>
</tr>
</tbody></table>

<h2 id="create-or-update-a-pin">Create or update a pin</h2>

<p>This endpoint allows you to create or updated pins.
The payload must be a valid JSON object.
The payload is returned on success with an id</p>
<pre class="highlight plaintext"><code>payload = {
  "coordinates": [-77.69531, 33.578],
  "name": "Bob's Burgers",
  "hashtags": ["burger", "restaurant"]
};
$http.post('http://example.com/api/pins/1356674', payload);
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"pin_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356674</span><span class="p">,</span><span class="w">
  </span><span class="nt">"coordinates"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mf">-77.69531</span><span class="p">,</span><span class="w"> </span><span class="mf">33.578</span><span class="p">],</span><span class="w">
  </span><span class="nt">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span><span class="w"> </span><span class="s2">"restaurant"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"entries"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w">
  </span><span class="nt">"bounties"</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">POST http://example.com/api/pin/&lt;ID&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>(optional) The ID of the pin to edit. If none is specified, creates a new pin</td>
</tr>
</tbody></table>

<aside class="warning">
    Note that some pins will return 403 Forbidden if they are hidden
    or you don&rsquo;t have permission to edit them
</aside>

<h2 id="get-entries">Get entries</h2>

<p>This endpoint allows you to get some entries</p>
<pre class="highlight plaintext"><code>$http.get('http://example.com/api/entries?pin=1234');
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"entry_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356674</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers Best Beef"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span><span class="w"> </span><span class="s2">"restarant"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Something something something"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"someUser"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"posted_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-26T19:47:03Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"likes"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dislikes"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="err">,</span><span class="w">
</span><span class="p">{</span><span class="w">
  </span><span class="nt">"entry_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356672</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers Is The Worst"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span><span class="w"> </span><span class="s2">"restarant"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"More Something something something"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url2.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"someUser2"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"posted_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-26T20:47:03Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"likes"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> 
  </span><span class="nt">"dislikes"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w"> 
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/enties?param1=value1&amp;param2=value2</code></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>pin</td>
<td>Get entries that belong to this pin</td>
</tr>
<tr>
<td>creator</td>
<td>Find entries that are created by this username</td>
</tr>
<tr>
<td>creator_id</td>
<td>Find entries that are created by this user_id</td>
</tr>
<tr>
<td>since</td>
<td></td>
</tr>
<tr>
<td>until</td>
<td></td>
</tr>
<tr>
<td>limit</td>
<td>25</td>
</tr>
<tr>
<td>skip</td>
<td>0</td>
</tr>
</tbody></table>

<h3 id="url-parameters">URL Parameters</h3>

<h2 id="get-an-entry">Get an entry</h2>

<p>This endpoint allows you to get a specific entry</p>
<pre class="highlight plaintext"><code>$http.get('http://example.com/api/entries/1356674');
</code></pre>

<blockquote>
<p>The above command returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json"><code><span class="p">{</span><span class="w">
  </span><span class="nt">"entry_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">1356674</span><span class="p">,</span><span class="w">
  </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Bob's Burgers Best Beef"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"hashtags"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"burger"</span><span class="p">,</span><span class="w"> </span><span class="s2">"restarant"</span><span class="p">],</span><span class="w">
  </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Something something something"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://url.com"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"created_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"someUser"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"posted_on"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2015-09-26T19:47:03Z"</span><span class="p">,</span><span class="w">
  </span><span class="nt">"likes"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="p">,</span><span class="w">
  </span><span class="nt">"dislikes"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>

<h3 id="http-request">HTTP Request</h3>

<p><code class="prettyprint">GET http://example.com/api/entry/&lt;ID&gt;</code></p>

<h3 id="url-parameters">URL Parameters</h3>

<table><thead>
<tr>
<th>Parameter</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ID</td>
<td>The id of the entry to get</td>
</tr>
</tbody></table>

          <h1 id="errors">Errors</h1>

<p>The Mapn API uses the following error codes:</p>

<table><thead>
<tr>
<th>Error Code</th>
<th>Meaning</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>Bad Request &ndash; Your request sucks</td>
</tr>
<tr>
<td>401</td>
<td>Unauthorized &ndash; Your authentication token is wrong</td>
</tr>
<tr>
<td>403</td>
<td>Forbidden &ndash; You don&rsquo;t have permission</td>
</tr>
<tr>
<td>404</td>
<td>Not Found &ndash; The specified thing could not be found</td>
</tr>
<tr>
<td>405</td>
<td>Method Not Allowed &ndash; You tried to access a thing with an invalid method</td>
</tr>
<tr>
<td>406</td>
<td>Not Acceptable &ndash; You requested a format that isn&rsquo;t json</td>
</tr>
<tr>
<td>429</td>
<td>Too Many Requests &ndash; You&rsquo;re requesting too many things! Slow down!</td>
</tr>
<tr>
<td>500</td>
<td>Internal Server Error &ndash; We had a problem with our server. Try again later.</td>
</tr>
<tr>
<td>503</td>
<td>Service Unavailable &ndash; We&rsquo;re temporarially offline for maintanance. Please try again later.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="JavaScript">JavaScript</a>
          </div>
      </div>
    </div>
  </body>
</html>
